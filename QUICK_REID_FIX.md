# –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Re-ID –ø—Ä–æ–±–ª–µ–º—ã

## –ü—Ä–æ–±–ª–µ–º–∞: –°–∏—Å—Ç–µ–º–∞ –ø—É—Ç–∞–µ—Ç —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π

### –°–∏–º–ø—Ç–æ–º—ã:
- –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ `person_id`
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –≤—ã—Å–æ–∫–∏–µ similarity scores –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π
- "–ß–µ—Ä–µ–∑ —Ä–∞–∑" –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç

### –ü—Ä–∏—á–∏–Ω–∞:
**Threshold —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π** - —Å–∏—Å—Ç–µ–º–∞ —Å–ª–∏—à–∫–æ–º –ª–µ–≥–∫–æ —Å—á–∏—Ç–∞–µ—Ç –ª—é–¥–µ–π –ø–æ—Ö–æ–∂–∏–º–∏.

---

## üîß –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ 1: –ü–æ–≤—ã—Å–∏—Ç—å threshold –¥–æ 0.85

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pkill -9 -f "run.py"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –æ—á–µ–Ω—å —Å—Ç—Ä–æ–≥–∏–º threshold
cd /Users/alextabula/Desktop/vision
OPENCV_AVFOUNDATION_SKIP_AUTH=1 \
PC_SHOW_DEBUG_WINDOW=false \
PC_ENABLE_REID=true \
PC_REID_SIMILARITY_THRESHOLD=0.85 \
PC_MAX_AGE_SECONDS=30.0 \
.venv/bin/python run.py --no-debug-window
```

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è:
```
–ë—ã–ª–æ (0.75):
Person A vs P0001: 0.78 ‚Üí MATCH ‚úì (–≤–æ–∑–º–æ–∂–Ω–æ –æ—à–∏–±–∫–∞)
Person B vs P0001: 0.76 ‚Üí MATCH ‚úì (–æ—à–∏–±–∫–∞!)

–°—Ç–∞–ª–æ (0.85):
Person A vs P0001: 0.78 ‚Üí ‚úó below threshold
Person B vs P0001: 0.76 ‚Üí ‚úó below threshold
‚Üí –°–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ person_id ‚úì
```

---

## üîß –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ 2: –û—á–∏—Å—Ç–∏—Ç—å Re-ID –±–∞–∑—É

–ï—Å–ª–∏ –±–∞–∑–∞ "–∏—Å–ø–æ—Ä—á–µ–Ω–∞" (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ embeddings):

```bash
# –ß–µ—Ä–µ–∑ API
curl -X POST http://localhost:8000/api/reid/clear

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
rm data/reid_db.pkl
```

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—á–Ω–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ª—é–¥–µ–π –∑–∞–Ω–æ–≤–æ —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞.

---

## üîß –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ 3: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Re-ID

–ï—Å–ª–∏ Re-ID –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–∏—Ö —É—Å–ª–æ–≤–∏–π:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ë–ï–ó Re-ID
OPENCV_AVFOUNDATION_SKIP_AUTH=1 \
PC_SHOW_DEBUG_WINDOW=false \
PC_ENABLE_REID=false \
PC_MAX_AGE_SECONDS=30.0 \
.venv/bin/python run.py --no-debug-window
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–¥—Å—á–µ—Ç –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ö–∞–∂–¥—ã–π track_id —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ù–µ—Ç –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–æ–π–Ω–æ–π –ø–æ–¥—Å—á–µ—Ç –µ—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ —É—Ö–æ–¥–∏—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è

---

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å similarity scores –≤ –ª–æ–≥–∞—Ö:

```bash
tail -100 terminal.txt | grep -A 3 "Re-ID similarities"
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
```
Track 15:
  Re-ID similarities:
    P0001: 0.882 ‚úì MATCH
    P0002: 0.623 ‚úó below threshold
    P0003: 0.541 ‚úó below threshold

Track 16 (–¥—Ä—É–≥–æ–π —á–µ–ª–æ–≤–µ–∫):
  Re-ID similarities:
    P0001: 0.781 ‚úì MATCH  ‚Üê –ü–†–û–ë–õ–ï–ú–ê! –î–æ–ª–∂–µ–Ω –±—ã—Ç—å < threshold
    P0002: 0.689 ‚úó below threshold
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ scores 0.75-0.82 –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π ‚Üí threshold —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π.

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π –≤ –±–∞–∑–µ:

```bash
curl http://localhost:8000/api/reid/persons | python3 -m json.tool | head -20
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
```json
{
  "count": 5,  // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π
  "persons": [...]
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
```json
{
  "count": 2,  // –ù–æ –ø–µ—Ä–µ–¥ –∫–∞–º–µ—Ä–æ–π –±—ã–ª–æ 5 —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π!
  "persons": [...]
}
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ threshold –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

### –ï—Å–ª–∏ –ª—é–¥–∏ –≤ –ø–æ—Ö–æ–∂–µ–π –æ–¥–µ–∂–¥–µ (—É–Ω–∏—Ñ–æ—Ä–º–∞, –¥–µ–ª–æ–≤–æ–π –¥—Ä–µ—Å—Å-–∫–æ–¥):

```bash
PC_REID_SIMILARITY_THRESHOLD=0.90  # –û—á–µ–Ω—å —Å—Ç—Ä–æ–≥–∏–π
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –ü–æ—á—Ç–∏ –Ω–µ –±—É–¥–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
- –õ—É—á—à–µ –¥—É–±–ª–∏–∫–∞—Ç—ã, —á–µ–º –ø—É—Ç–∞–Ω–∏—Ü–∞

### –ï—Å–ª–∏ –ª—é–¥–∏ –≤ —Ä–∞–∑–Ω–æ–π –æ–¥–µ–∂–¥–µ (–º–∞–≥–∞–∑–∏–Ω, —É–ª–∏—Ü–∞):

```bash
PC_REID_SIMILARITY_THRESHOLD=0.75  # –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
```

### –ï—Å–ª–∏ —Ö–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ –∏ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏:

```bash
PC_REID_SIMILARITY_THRESHOLD=0.70  # –ë–æ–ª–µ–µ permissive
```

### –¢–µ–∫—É—â–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è):

```bash
PC_REID_SIMILARITY_THRESHOLD=0.85  # –°—Ç—Ä–æ–≥–∏–π, –Ω–æ –Ω–µ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π
```

---

## ‚öôÔ∏è –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª

### 1. –û–±–Ω–æ–≤–∏–ª `.env` —Ñ–∞–π–ª:

```bash
# –ë—ã–ª–æ
PC_REID_SIMILARITY_THRESHOLD=0.75

# –°—Ç–∞–ª–æ
PC_REID_SIMILARITY_THRESHOLD=0.85
```

### 2. –û–±–Ω–æ–≤–∏–ª `app/config.py` (default):

```python
reid_similarity_threshold: float = 0.85  # –ë—ã–ª–æ 0.65
```

### 3. –ù—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
pkill -9 -f "run.py"

cd /Users/alextabula/Desktop/vision
OPENCV_AVFOUNDATION_SKIP_AUTH=1 \
PC_SHOW_DEBUG_WINDOW=false \
PC_ENABLE_REID=true \
PC_REID_SIMILARITY_THRESHOLD=0.85 \
PC_MAX_AGE_SECONDS=30.0 \
.venv/bin/python run.py --no-debug-window
```

---

## üßπ –†–µ–∫–æ–º–µ–Ω–¥—É—é –æ—á–∏—Å—Ç–∏—Ç—å Re-ID –±–∞–∑—É

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è threshold —Å—Ç–∞—Ä—ã–µ embeddings –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏:

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –±–∞–∑—É
curl -X POST http://localhost:8000/api/reid/clear

# –ò–ª–∏
rm data/reid_db.pkl

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—á–Ω–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ª—é–¥–µ–π –∑–∞–Ω–æ–≤–æ —Å –Ω–æ–≤—ã–º, –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º threshold.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:

```bash
tail -f terminal.txt | grep "Re-ID similarities"
```

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
```
Track 20:
  Re-ID similarities:
    P0001: 0.923 ‚úì MATCH      (—ç—Ç–æ —Ç–æ—Ç –∂–µ —á–µ–ª–æ–≤–µ–∫)
    P0002: 0.612 ‚úó below threshold
    P0003: 0.548 ‚úó below threshold

Track 21 (–¥—Ä—É–≥–æ–π —á–µ–ª–æ–≤–µ–∫):
  Re-ID similarities:
    P0001: 0.712 ‚úó below threshold  ‚Üê –¢–µ–ø–µ—Ä—å –ù–ï —Å–æ–≤–ø–∞–¥–∞–µ—Ç! ‚úì
    P0002: 0.689 ‚úó below threshold
‚Üí New person registered: P0004  ‚úì –ù–æ–≤—ã–π ID!
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ person_id:

```bash
# –î–æ–ª–∂–Ω–æ —Ä–∞—Å—Ç–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ª—é–¥–µ–π
curl http://localhost:8000/api/reid/persons | grep "count"
```

### 3. Web UI:

–û—Ç–∫—Ä–æ–π—Ç–µ http://0.0.0.0:8000

–ù–∞–∂–º–∏—Ç–µ **"üë§ Known Persons"**

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
- –†–∞–∑–Ω—ã–µ person_id –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π
- P0001, P0002, P0003, P0004, ...

---

## üéõÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç A: –û—Ç–∫–ª—é—á–∏—Ç—å Re-ID –ø–æ–ª–Ω–æ—Å—Ç—å—é

```bash
PC_ENABLE_REID=false
```

**–ü–ª—é—Å—ã:**
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø—É—Ç–∞–Ω–∏—Ü–µ–π –ª—é–¥–µ–π
- –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ—Ç –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–æ–π–Ω–æ–π –ø–æ–¥—Å—á–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç B: –£–≤–µ–ª–∏—á–∏—Ç—å max_age_seconds –≤–º–µ—Å—Ç–æ Re-ID

```bash
PC_ENABLE_REID=false
PC_MAX_AGE_SECONDS=60.0  # 1 –º–∏–Ω—É—Ç–∞ –ø–∞–º—è—Ç–∏ —Ç—Ä–µ–∫–æ–≤
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ByteTrack –ø–æ–º–Ω–∏—Ç —Ç—Ä–µ–∫–∏ 1 –º–∏–Ω—É—Ç—É
- –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –≤–µ—Ä–Ω–µ—Ç—Å—è –∑–∞ –º–∏–Ω—É—Ç—É ‚Üí —Ç–æ—Ç –∂–µ track_id
- –ù–µ –Ω—É–∂–µ–Ω Re-ID

### –í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Re-ID —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫—É

–ú–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É —á—Ç–æ–±—ã Re-ID –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ø–æ–¥—Å—á–µ—Ç, –∞ —Ç–æ–ª—å–∫–æ –ø–æ–º–æ–≥–∞–ª.

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –û—á–∏—Å—Ç–∏—Ç—å Re-ID –±–∞–∑—É: `curl -X POST http://localhost:8000/api/reid/clear`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å threshold –≤ `.env`: `PC_REID_SIMILARITY_THRESHOLD=0.85`
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω–æ–≤—ã–º threshold
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å 2-3 —Ä–∞–∑–Ω—ã–º–∏ –ª—é–¥—å–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏ ‚Üí —Ä–∞–∑–Ω—ã–µ person_id
- [ ] –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—Ä–æ–±–ª–µ–º–∞ ‚Üí –ø–æ–≤—ã—Å–∏—Ç—å –¥–æ 0.90
- [ ] –ï—Å–ª–∏ —Å–æ–≤—Å–µ–º –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –æ—Ç–∫–ª—é—á–∏—Ç—å Re-ID

---

## üí° –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–î–ª—è production —Å –≤—ã—Å–æ–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ —Ç–æ—á–Ω–æ—Å—Ç–∏:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Deep Learning Re-ID

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å torch-based Re-ID –º–æ–¥–µ–ª—å (OSNet, FastReID):
- –¢–æ—á–Ω–æ—Å—Ç—å 98%+
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ —Å–º–µ–Ω–µ –æ–¥–µ–∂–¥—ã
- –¢—Ä–µ–±—É–µ—Ç PyTorch (~500MB)

### –í–∞—Ä–∏–∞–Ω—Ç 2: Face Recognition

–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –æ–¥–µ–∂–¥—ã
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

ByteTrack + Re-ID + Face Recognition:
- –õ—É—á—à–µ–µ –∏–∑ –≤—Å–µ—Ö –º–∏—Ä–æ–≤
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å

---

## üö® –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

### –û–ø—Ü–∏—è 1: –û—Ç–∫–ª—é—á–∏—Ç—å Re-ID

```bash
PC_ENABLE_REID=false
```

### –û–ø—Ü–∏—è 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Re-ID —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ Re-ID, –Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
- –°–∫–æ–ª—å–∫–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ª—é–¥–µ–π
- –ö–∞–∫ —á–∞—Å—Ç–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è
- –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–≤–∏–∂–µ–Ω–∏—è

### –û–ø—Ü–∏—è 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

–°–¥–µ–ª–∞—Ç—å threshold –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º:
- –î–Ω–µ–º (—Ö–æ—Ä–æ—à–µ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ): 0.75
- –í–µ—á–µ—Ä–æ–º (–ø–ª–æ—Ö–æ–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ): 0.60
- –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É–Ω–∏—Ñ–æ—Ä–º—ã: 0.90

---

**–†–µ–∑—é–º–µ:**
1. ‚úÖ –ü–æ–≤—ã—Å–∏–ª threshold: 0.75 ‚Üí 0.85
2. ‚úÖ –û–±–Ω–æ–≤–∏–ª config.py –∏ .env
3. ‚ö†Ô∏è –ù–£–ñ–ù–û: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. üßπ –†–ï–ö–û–ú–ï–ù–î–£–Æ: –û—á–∏—Å—Ç–∏—Ç—å Re-ID –±–∞–∑—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:**

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
pkill -9 -f "run.py"

# 2. –û—á–∏—Å—Ç–∏—Ç—å Re-ID
curl -X POST http://localhost:8000/api/reid/clear
# –ò–õ–ò
rm data/reid_db.pkl

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –Ω–æ–≤—ã–º threshold
cd /Users/alextabula/Desktop/vision
OPENCV_AVFOUNDATION_SKIP_AUTH=1 \
PC_SHOW_DEBUG_WINDOW=false \
PC_ENABLE_REID=true \
PC_REID_SIMILARITY_THRESHOLD=0.85 \
PC_MAX_AGE_SECONDS=30.0 \
.venv/bin/python run.py --no-debug-window
```

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è ‚Üí –¥–∞–≤–∞–π—Ç–µ –æ—Ç–∫–ª—é—á–∏–º Re-ID –∏–ª–∏ –ø–æ–≤—ã—Å–∏–º threshold –¥–æ 0.90! üëç
