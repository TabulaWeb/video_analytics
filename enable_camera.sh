#!/bin/bash

echo "========================================"
echo "  People Counter - Camera Setup"
echo "========================================"
echo ""

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${YELLOW}–®–∞–≥ 1: –°–±—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –∫–∞–º–µ—Ä—ã${NC}"
echo "–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞: tccutil reset Camera"
tccutil reset Camera 2>/dev/null
if [ $? -eq 0 ]; then
    echo -e "${GREEN}‚úì –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã —Å–±—Ä–æ—à–µ–Ω—ã${NC}"
else
    echo -e "${RED}‚úó –ù–µ —É–¥–∞–ª–æ—Å—å —Å–±—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)${NC}"
fi
echo ""

echo -e "${YELLOW}–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–º–µ—Ä${NC}"
if command -v ffmpeg &> /dev/null; then
    echo "–°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤:"
    ffmpeg -f avfoundation -list_devices true -i "" 2>&1 | grep -A 10 "AVFoundation video devices"
else
    system_profiler SPCameraDataType 2>/dev/null | grep -A 5 "Camera"
fi
echo ""

echo -e "${YELLOW}–®–∞–≥ 3: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏${NC}"
echo ""
echo "–ï—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:"
echo ""
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ: System Preferences (–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)"
echo "   ‚Üí Security & Privacy (–ó–∞—â–∏—Ç–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)"
echo "   ‚Üí Privacy (–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å)"
echo "   ‚Üí Camera (–ö–∞–º–µ—Ä–∞)"
echo ""
echo "2. –ù–∞–∂–º–∏—Ç–µ –∑–∞–º–æ–∫ üîí –≤–Ω–∏–∑—É —Å–ª–µ–≤–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
echo ""
echo "3. –ù–∞–π–¥–∏—Ç–µ –≤ —Å–ø–∏—Å–∫–µ –æ–¥–Ω–æ –∏–∑:"
echo "   - Terminal"
echo "   - Python"
echo "   - iTerm2"
echo ""
echo "4. –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É ‚úì –Ω–∞–ø—Ä–æ—Ç–∏–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
echo ""
echo "5. –ó–∞–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
echo ""
echo -e "${GREEN}–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!${NC}"
echo ""
echo "========================================"
echo ""
echo -e "${YELLOW}–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:${NC}"
echo "  cd /Users/alextabula/Desktop/vision"
echo "  .venv/bin/python run.py"
echo ""
echo "========================================"
